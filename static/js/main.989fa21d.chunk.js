(this["webpackJsonpform-app"]=this["webpackJsonpform-app"]||[]).push([[0],Array(27).concat([function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a,c,o,i=n(1),l=n(0),r=n.n(l),s=n(9),d=n.n(s),u=n(2);!function(e){e.inputCell="inputCell",e.displayCell="displayCell",e.selectCell="selectCell"}(a||(a={})),function(e){e.edit="Edit Mode",e.view="View Mode"}(c||(c={})),function(e){e[e.x=200]="x",e[e.y=200]="y"}(o||(o={}));var b=n(5),j=Object(b.b)({name:"data",initialState:{elements:{},ids:[]},reducers:{elementAdded:function(e,t){e.elements[t.payload.id]={id:t.payload.id,elementType:t.payload.elementType,value:"",formula:""},e.ids.push(t.payload.id)},valueChanged:function(e,t){e.elements[t.payload.id].value=t.payload.value},formulaChanged:function(e,t){e.elements[t.payload.id].formula=t.payload.formula},idChanged:function(e,t){e.elements[t.payload.newId]=e.elements[t.payload.oldId],e.elements[t.payload.newId].id=t.payload.newId,delete e.elements[t.payload.oldId],e.ids.push(t.payload.newId),e.ids.splice(e.ids.indexOf(t.payload.oldId),1)}}}),f={viewMode:c.edit,focusedId:null},p=Object(b.b)({name:"application",initialState:f,reducers:{viewModeChanged:function(e,t){e.viewMode=t.payload.newMode},focusChanged:function(e,t){e.focusedId=t.payload.focusedId}},extraReducers:function(e){e.addCase(j.actions.idChanged,(function(e,t){e.focusedId===t.payload.oldId&&(e.focusedId=t.payload.newId)}))}});n(13),n(27);function O(e){return Object(i.jsxs)("button",{className:"menu-button",onClick:function(t){e.action()},children:[e.icon?Object(i.jsx)("i",{className:e.icon}):"",Object(i.jsx)("span",{children:e.text})]})}var m=n(15),x=n(4),v=n(17),y=n(3);n(28);function h(e){var t=e.position,n=e.closeMenu;Object(l.useEffect)((function(){return window.addEventListener("click",n),function(){window.removeEventListener("click",n)}}),[n]);var a=e.options.map((function(e,t){return Object(i.jsx)("div",{className:"context-option-group",children:e.map((function(e){return Object(i.jsx)("div",{className:"context-option",onClick:e.action,children:e.text},e.text)}))},t)}));return Object(i.jsx)("div",{className:"context-menu",style:{left:t.x,top:t.y,zIndex:1e3},children:a})}function C(e){return!isNaN(Number(e))&&""!==e}function g(e){return isNaN(e)?NaN:e>=0?e:0}var k=Object(b.b)({name:"styles",initialState:{elements:{}},reducers:{elementMoved:function(e,t){e.elements[t.payload.id].position={x:t.payload.x,y:t.payload.y}},styleChanged:function(e,t){e.elements[t.payload.id]=Object(x.a)(Object(x.a)({},e.elements[t.payload.id]),t.payload.style)}},extraReducers:function(e){e.addCase(j.actions.elementAdded,(function(e,t){e.elements[t.payload.id]={position:{x:200,y:200},textColor:"black",backgroundColor:"white",fontSize:"16px",fontWeight:"normal",fontFamily:"Roboto",borderThickness:"1px",borderColor:"black",borderRadius:"0"}})).addCase(j.actions.idChanged,(function(e,t){e.elements[t.payload.newId]=e.elements[t.payload.oldId],delete e.elements[t.payload.oldId]}))}});n(29);function N(e){return e.hasOwnProperty("text")?Object(i.jsx)("button",{className:"button "+e.styleType+" "+e.modifiers,onClick:e.action,children:e.text}):Object(i.jsx)("i",{onClick:e.action,className:"icon-button "+e.icon})}n(30);function w(e){return Object(i.jsx)("div",{className:"dialog-background",children:Object(i.jsxs)("div",{className:"dialog",children:[Object(i.jsxs)("div",{className:"header",children:[Object(i.jsx)("span",{className:"dialog-title",children:e.title}),e.allowCancel?Object(i.jsx)(N,{icon:"far fa-times-circle",action:e.onCancel}):void 0]}),Object(i.jsx)("div",{className:"content",children:e.children}),Object(i.jsx)("div",{className:"footer",children:e.footer})]})})}n(31);function S(e){var t=Object(l.useState)(""),n=Object(y.a)(t,2),a=n[0],c=n[1],o=Object(l.useState)(""),r=Object(y.a)(o,2),s=r[0],d=r[1];return Object(i.jsxs)(w,{title:e.title,onCancel:e.onCancel,footer:Object(i.jsx)(N,{text:"Change",styleType:"success",action:function(){var t=e.onSubmit(a);d(void 0!==t?t.error:"")}}),allowCancel:!0,children:[Object(i.jsxs)("label",{className:"label",children:[e.inputLabel,Object(i.jsx)("input",{className:"input"+(""!==s?" error":""),value:a,onChange:function(e){c(e.target.value)},onKeyPress:function(t){"Enter"===t.key&&e.onSubmit(a)},autoFocus:!0})]}),Object(i.jsx)("div",{className:"error-message",children:s})]})}var I=n(6);n(32);function E(e){var t=Object(l.useState)({}),n=Object(y.a)(t,2),a=n[0],c=n[1],o=e.options.map((function(t){return Object(i.jsxs)("label",{className:"label",children:[t.text,Object(i.jsx)("input",{className:"input",onChange:function(e){c((function(n){return Object(x.a)(Object(x.a)({},n),{},Object(I.a)({},t.type,e.target.value))}))},onKeyPress:function(t){"Enter"===t.key&&e.onSubmit(a)},defaultValue:t.initialValue})]},t.type)}));return Object(i.jsx)(w,{title:e.title,footer:Object(i.jsx)(N,{text:"Done",styleType:"success",action:function(){e.onSubmit(a)}}),onCancel:e.onCancel,allowCancel:!0,children:o})}n(33);function M(e){var t=e.handleDrop,n=e.active,a=e.children,c=Object(l.useState)(!1),o=Object(y.a)(c,2),r=o[0],s=o[1],d=Object(l.useState)({x:0,y:0}),u=Object(y.a)(d,2),b=u[0],j=u[1],f=Object(l.useState)(e.initialPosition),p=Object(y.a)(f,2),O=p[0],m=p[1],x=Object(l.useCallback)((function(e){r&&(e.preventDefault(),m({x:g(e.clientX-b.x-50),y:g(e.clientY-b.y-25)}))}),[m,r,b]),v=Object(l.useCallback)((function(t){"Escape"===t.key&&(s(!1),m(e.initialPosition))}),[s,m,e.initialPosition]);return Object(l.useEffect)((function(){return document.addEventListener("mousemove",x),document.addEventListener("keyup",v),function(){document.removeEventListener("mousemove",x),document.removeEventListener("keyup",v)}}),[x,v]),Object(i.jsx)("div",{className:"draggable",onMouseDown:function(e){n&&(s(!0),j({x:e.nativeEvent.offsetX,y:e.nativeEvent.offsetY}))},onMouseUp:function(e){r&&(s(!1),t(g(e.clientX-b.x-50),g(e.clientY-b.y-25)))},onContextMenu:e.onContextMenu,style:{cursor:n?"move":"auto",position:"absolute",top:O.y,left:O.x,borderColor:e.style.color,borderWidth:e.style.thickness,borderRadius:e.style.radius,backgroundColor:e.style.backgroundColor},children:a})}function T(e){var t=Object(u.c)();return Object(i.jsx)("div",{onClick:function(n){t(p.actions.focusChanged({focusedId:e.id}))},children:e.children})}n(34);function F(e){var t=e.id,n=e.value,a=e.handleValueChange,o=e.handleClick,r=e.readonly,s=e.autocomplete,d=e.children,b=Object(u.c)(),f=Object(u.d)((function(e){return Object(x.a)({},e.styles.elements[t])}),u.b),p=Object(u.d)((function(e){return e.application.viewMode})),O=Object(l.useState)(!1),m=Object(y.a)(O,2),C=m[0],N=m[1];Object(l.useEffect)((function(){N(p===c.edit)}),[p]);var w=Object(l.useCallback)((function(e,n){b(k.actions.elementMoved({id:t,x:e,y:n}))}),[b,t]),I=Object(l.useState)(Object(i.jsx)(i.Fragment,{})),F=Object(y.a)(I,2),P=F[0],R=F[1],D=function(e){var t=Object(l.useState)(Object(i.jsx)(i.Fragment,{})),n=Object(y.a)(t,2),a=n[0],c=n[1];return[a,Object(l.useCallback)((function(t){t.preventDefault(),t.stopPropagation(),c(Object(i.jsx)(h,{options:e,position:{x:g(t.nativeEvent.offsetX+10),y:g(t.nativeEvent.offsetY+5)},closeMenu:function(){c(Object(i.jsx)(i.Fragment,{}))}}))}),[c,e])]}([[{text:"Change ID",action:function(){var t=function(){R(Object(i.jsx)(i.Fragment,{})),N(!0)};N(!1),R(Object(i.jsx)(S,{title:"Change ID",inputLabel:"New ID",onSubmit:function(n){if(0===n.length)return{error:"Must choose an ID."};b(j.actions.idChanged({oldId:e.id,newId:n})),t()},onCancel:t}))}},{text:"Style",action:function(){var t=function(){R(Object(i.jsx)(i.Fragment,{})),N(!0)};N(!1),R(Object(i.jsx)(E,{title:"Style",options:[{text:"Border Color",type:"borderColor",initialValue:f.borderColor},{text:"Border Thickness",type:"borderThickness",initialValue:f.borderThickness},{text:"Border Radius",type:"borderRadius",initialValue:f.borderRadius},{text:"Font Color",type:"textColor",initialValue:f.textColor},{text:"Font Size",type:"fontSize",initialValue:f.fontSize},{text:"Font Weight",type:"fontWeight",initialValue:f.fontWeight},{text:"Font Name",type:"fontFamily",initialValue:f.fontFamily}],onSubmit:function(n){b(k.actions.styleChanged({id:e.id,style:n})),t()},onCancel:t}))}}]].concat(Object(v.a)(e.contextOptions))),V=Object(y.a)(D,2),L=V[0],B=V[1];return Object(i.jsx)(T,{id:t,children:Object(i.jsxs)(M,{active:C,onContextMenu:B,handleDrop:w,initialPosition:f.position,style:{color:f.borderColor,thickness:f.borderThickness,radius:f.borderRadius,backgroundColor:f.backgroundColor},children:[Object(i.jsx)("span",{className:"id-label",children:p===c.edit?t:""}),Object(i.jsx)("input",{className:"cell",id:t,type:"text",onChange:a,onContextMenu:B,onMouseDown:o,value:n,readOnly:r,autoComplete:s?"on":"off",style:{color:f.textColor,fontSize:f.fontSize,fontWeight:f.fontWeight,fontFamily:f.fontFamily}}),L,d,P]})})}n(35);function P(e){var t=e.options.map((function(t,n){return Object(i.jsx)("div",{className:"dropdown-choice",onClick:(a=t.value,function(t){e.onSelection(a)}),children:t.text},t.value+n);var a}));return Object(i.jsx)("div",{className:0===e.options.length?"hidden":"dropdown",children:t})}function R(e){var t=Object(u.c)(),n=Object(u.d)((function(t){return Object(x.a)({},t.data.elements[e.id])})),a=Object(u.d)((function(e){return e.application.viewMode})),o=Object(u.d)((function(e){return Object(x.a)({},e.data.elements)})),r=n.formula.toUpperCase().split("(").slice(-1)[0],s=""===r?[]:_.filter((function(e){return e.includes(r)})).sort((function(e,t){return e.indexOf(r)-t.indexOf(r)})).map((function(e){return{text:e,value:e}})),d=Object(l.useCallback)((function(e){t(j.actions.formulaChanged({id:n.id,formula:e.target.value}))}),[t,n.id]),b=Object(l.useCallback)((function(e){t(j.actions.formulaChanged({id:n.id,formula:n.formula+e+"("}))}),[t,n.id,n.formula]);return Object(i.jsx)("div",{onKeyPress:function(e){if(("Enter"===e.key||"Tab"===e.key)&&s.length>0){var a=n.formula.includes("(")?n.formula.split("(").slice(0,-1).join("(")+"(":"";t(j.actions.formulaChanged({id:n.id,formula:a+s[0].text+"("}))}},children:Object(i.jsx)(F,{id:n.id,value:function(){if(a===c.edit)return n.formula;if(a===c.view){var e=n.formula,t=e.match(/{.+?}/g);if(null!==t){var i,l=Object(m.a)(t);try{for(l.s();!(i=l.n()).done;){var r=i.value,s=void 0;if(void 0===o[r.slice(1,-1)])return"#ERROR";C(s=o[r.slice(1,-1)].value)?e=e.replace(r,s):C(s)||(e=e.replace(r,'"'+s+'"'))}}catch(u){l.e(u)}finally{l.f()}}var d=G.parse(e);return null!==d.error?d.error:d.result}return""}(),handleValueChange:d,handleClick:function(e){e.stopPropagation()},readonly:a===c.view,autocomplete:!1,contextOptions:[],children:a===c.edit?Object(i.jsx)(P,{onSelection:b,options:s},"dropdown"+n.id):void 0})})}function D(e){var t=Object(u.c)(),n=Object(u.d)((function(t){return Object(x.a)({},t.data.elements[e.id])}),u.b),a=Object(u.d)((function(e){return e.application.viewMode})),o=Object(l.useCallback)((function(n){t(j.actions.valueChanged({id:e.id,value:n.target.value}))}),[t,e.id]);return Object(i.jsx)(F,{id:e.id,value:a===c.edit?"":n.value,handleValueChange:o,handleClick:function(e){e.stopPropagation()},readonly:a===c.edit,autocomplete:!1,contextOptions:[]})}n(36);function V(e){Object(u.c)();var t=Object(u.d)((function(t){return Object(x.a)({},t.data.elements[e.id])}),u.b),n=Object(l.useState)(t.value),a=Object(y.a)(n,2),c=a[0],o=(a[1],[{text:t.formula,value:t.formula}]);return Object(i.jsx)("div",{onKeyPress:function(){},children:Object(i.jsx)(F,{id:e.id,value:c,handleValueChange:function(){},handleClick:function(e){e.stopPropagation()},readonly:!1,autocomplete:!1,contextOptions:[],children:Object(i.jsx)(P,{onSelection:function(){},options:o},"dropdown"+e.id)})})}n(37);function L(e){return Object(i.jsxs)("div",{className:"component-menu",children:[Object(i.jsx)(O,{text:"Input Cell",icon:"fas fa-i-cursor",action:function(){e.addElementCallback(a.inputCell)}}),Object(i.jsx)(O,{text:"Display Cell",icon:"fas fa-square-root-alt",action:function(){e.addElementCallback(a.displayCell)}}),Object(i.jsx)(O,{text:"Select Cell",icon:"fas fa-caret-square-down",action:function(){e.addElementCallback(a.selectCell)}})]})}n(38);var B=n(16),z=(n(39),n(40),["rgba(255, 0, 0, 1)","rgba(0, 128, 0, 1)","rgba(0, 0, 255, 1)","rgba(255, 255, 0, 1)","rgba(255, 140, 0, 1)","rgba(0, 0, 0, 1)","rgba(255, 255, 255, 1)","rgba(255, 0, 0, 0.4)","rgba(0, 128, 0, 0.4)","rgba(0, 0, 255, 0.4)","rgba(255, 255, 0, 0.4)","rgba(255, 140, 0, 0.4)","rgba(0, 0, 0, 0.5)","rgba(0, 0, 0, 0.1)"]),W=new RegExp(/[abcdef1234567890]{6}/);function A(e){return Object(i.jsxs)("div",{className:"properties-list cell",children:[Object(i.jsx)(U,{id:e.id}),Object(i.jsx)(X,{label:"Border Color",styleType:"borderColor",id:e.id}),Object(i.jsx)(X,{label:"Font Color",styleType:"textColor",id:e.id}),Object(i.jsx)(X,{label:"Background Color",styleType:"backgroundColor",id:e.id})]})}function K(e){return Object(i.jsxs)("div",{className:"properties-list cell",children:[Object(i.jsx)(U,{id:e.id}),Object(i.jsx)(X,{label:"Border Color",styleType:"borderColor",id:e.id}),Object(i.jsx)(X,{label:"Font Color",styleType:"textColor",id:e.id}),Object(i.jsx)(X,{label:"Background Color",styleType:"backgroundColor",id:e.id})]})}function U(e){var t=Object(u.c)(),n=Object(l.useState)(e.id),a=Object(y.a)(n,2),c=a[0],o=a[1];Object(l.useEffect)((function(){o(e.id)}),[e.id,o]);return Object(i.jsxs)("div",{className:"option",children:[Object(i.jsx)("label",{className:"label",children:"ID"}),Object(i.jsx)("input",{className:"input",onChange:function(e){o(e.target.value)},onBlur:function(){e.id!==c&&t(j.actions.idChanged({oldId:e.id,newId:c}))},value:c,onKeyPress:function(n){if("Enter"===n.key){if(e.id===c)return;t(j.actions.idChanged({oldId:e.id,newId:c}))}}})]})}function X(e){var t=e.label,n=e.styleType,a=e.id,c=Object(u.c)(),o=Object(u.d)((function(t){return t.styles.elements[e.id][e.styleType]})),r=Object(l.useState)(o),s=Object(y.a)(r,2),d=s[0],b=s[1],j=Object(l.useState)(""),f=Object(y.a)(j,2),p=f[0],O=f[1],m=Object(l.useState)(!1),x=Object(y.a)(m,2),v=x[0],h=x[1],C=Object(l.useCallback)((function(e){c(k.actions.styleChanged({id:a,style:Object(I.a)({},n,e)}))}),[c,a,n]),g=Object(l.useCallback)((function(){c(k.actions.styleChanged({id:a,style:Object(I.a)({},n,d)})),h(!1)}),[c,a,n,d]);Object(l.useEffect)((function(){b(o)}),[o]),Object(l.useEffect)((function(){return document.addEventListener("click",g),function(){document.removeEventListener("click",g)}}),[g]),Object(l.useEffect)((function(){O(d.replace("#",""))}),[d]);var N=z.map((function(e){return Object(i.jsx)("div",{style:{backgroundColor:e},onClick:function(t){t.stopPropagation(),C(e),h(!1)}},e)}));return Object(i.jsxs)("div",{className:"option",children:[Object(i.jsx)("label",{className:"label",children:t}),Object(i.jsx)("div",{className:"color-picker",onClick:function(e){e.stopPropagation(),h(!0)},style:{backgroundColor:d},children:v?Object(i.jsxs)("div",{className:"popup",children:[Object(i.jsx)("div",{className:"presets",children:N}),Object(i.jsx)(B.a,{color:d,onChange:b}),Object(i.jsxs)("div",{className:"color-input",children:[Object(i.jsx)("div",{children:"r"}),Object(i.jsx)("input",{onChange:function(e){O(e.target.value),6===e.target.value.length&&W.test(e.target.value)&&b("#"+e.target.value)},value:p})]})]}):null})]})}function Y(e){var t,n=Object(u.d)((function(e){return e.application.focusedId})),c=Object(u.d)((function(e){return null===e.application.focusedId?null:e.data.elements[e.application.focusedId].elementType}));if(null===n)return Object(i.jsx)("div",{className:"properties-menu"});switch(c){case a.displayCell:case a.inputCell:t=Object(i.jsx)(A,{id:n});break;case a.selectCell:t=Object(i.jsx)(K,{id:n});break;default:t=Object(i.jsx)(i.Fragment,{})}return Object(i.jsx)("div",{className:"properties-menu",children:t})}n(41);function q(e){return Object(i.jsx)("div",{className:"toolbar",children:e.children})}n(42);var J=n(14).Parser,_=n(14).SUPPORTED_FORMULAS,G=new J;var H=function(){var e=Object(u.c)(),t=Object(u.d)((function(e){return e.data.elements}),u.b),n=Object(u.d)((function(e){return e.data.ids}),u.b),o=Object(u.d)((function(e){return e.application.viewMode})),r=Object(l.useCallback)((function(t){e(j.actions.elementAdded({id:t+n.length,elementType:t}))}),[e,n.length]),s=n.map((function(e,n){switch(t[e].elementType){case a.inputCell:return Object(i.jsx)(D,{id:e},n);case a.displayCell:return Object(i.jsx)(R,{id:e},n);case a.selectCell:return Object(i.jsx)(V,{id:e},n);default:return"Error"}}));return Object(i.jsxs)("div",{className:"app",children:[Object(i.jsx)("div",{className:"header",children:Object(i.jsxs)(q,{children:[Object(i.jsx)(O,{text:o,action:function(){e(p.actions.viewModeChanged({newMode:o===c.edit?c.view:c.edit}))}}),Object(i.jsx)(L,{addElementCallback:r})]})}),Object(i.jsx)("div",{className:"left-toolbar"}),Object(i.jsx)("div",{id:"content",className:"content",children:s}),Object(i.jsx)("div",{className:"right-toolbar",children:Object(i.jsx)(Y,{})}),Object(i.jsx)("div",{className:"footer"})]})},Q=Object(b.a)({reducer:{data:j.reducer,styles:k.reducer,application:p.reducer}});d.a.render(Object(i.jsx)(r.a.StrictMode,{children:Object(i.jsx)(u.a,{store:Q,children:Object(i.jsx)(H,{})})}),document.getElementById("root"))}]),[[43,1,2]]]);
//# sourceMappingURL=main.989fa21d.chunk.js.map